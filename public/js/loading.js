(function(a){function b(b){return a.ui_loading.settings.inited?!0:(a.ui_loading.settings.inited=!0,b&&a.extend(a.ui_loading.settings,b),a('<div id="ui_loading_progressBar" class="ui_loading_progressBar" style="display: none; ">'+a.ui_loading.settings.message+"...</div>").appendTo("body"),a("body").append('<div id="ui_loading_overlay" class="ui_loading_hide"></div>'),a("#ui_loading_progressBar").hide(),a(document).ajaxStart(function(){g(),e()}).ajaxStop(function(){h(),f()}),a.ui_loading.settings.supportIframe&&a("iframe").each(function(){a(this).bind("beforeload",function(){g(this),e(this)}),a(this).load(function(){h(),f()})}),void 0)}function c(){return a.ui_loading.settings.overlay==0||a.ui_loading.settings.opacity===null}function d(a){return null==a?!1:a.offsetWidth>0&&a.offsetHeight>0}function e(b){var c,d,e;b?(c=b.getBoundingClientRect(),d=parseInt(c.left.toFixed(0))+(c.right-c.left)/2+a(document).scrollLeft(),e=parseInt(c.top.toFixed(0))+(c.bottom-c.top)/2+a(document).scrollTop(),a("#ui_loading_progressBar").css({left:d,top:e}).show()):a("#ui_loading_progressBar").css({left:"50%",top:"50%"}).show()}function f(){a("#ui_loading_progressBar").hide()}function g(b){var e,f;if(!c()){if(a("#ui_loading_overlay").length==0&&a("body").append('<div id="ui_loading_overlay" class="ui_loading_hide"></div>'),e=a("#ui_loading_overlay"),b){if(!d(b))return;isNaN(b.height)?e.height(b.height):e.height(b.height+"px"),isNaN(b.width)?e.width(b.width):e.width(b.width+"px"),f=b.getBoundingClientRect(),e.css("left",f.left+a(document).scrollLeft()).css("top",f.top+a(document).scrollTop())}else e.height("100%").width("100%").css("top",0).css("left",0);return a("#ui_loading_overlay").hide().addClass("ui_loading_overlayBG").css("opacity",a.ui_loading.settings.opacity).fadeIn(200),!1}}function h(){return c()?void 0:(a("#ui_loading_overlay").fadeOut(200,function(){a("#ui_loading_overlay").removeClass("ui_loading_overlayBG"),a("#ui_loading_overlay").addClass("ui_loading_hide"),a("#ui_loading_overlay").remove()}),!1)}a.ui_loading=function(){},a.extend(a.ui_loading,{settings:{overlay:!0,opacity:.2,supportIframe:!0,message:"数据加载中，请稍等..."}}),a.fn.ui_loading=function(c){a(this).length!=0&&b(c)}})(jQuery);